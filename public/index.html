<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tr·ª£ l√Ω ·∫£o c√° nh√¢n th√¥ng minh h·ªó tr·ª£ qu·∫£n l√Ω th·ªùi gian v√† c√¥ng vi·ªác">
    <title>Tr·ª£ L√Ω AI</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/timer.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/schedule.css">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/chat.css">
    <link rel="stylesheet" href="css/input.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/news.css">
    <link rel="stylesheet" href="css/model-settings.css">
    <!-- Preload critical scripts -->
    <link rel="modulepreload" href="js/config.js" as="script" crossorigin="anonymous">
    <link rel="modulepreload" href="js/utils.js" as="script" crossorigin="anonymous">
</head>

<body>
    <!-- Sidebar navigation -->
    <aside class="sidebar" id="sidebar">
        <!-- Main feature buttons -->
        <nav class="sidebar-buttons">
            <button data-function="model-settings" onclick="showModelSettings()" aria-label="C√†i ƒë·∫∑t m√¥ h√¨nh AI">
                <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
                <span class="button-text">C√†i ƒê·∫∑t M√¥ H√¨nh</span>
            </button>
            <button data-function="schedule" onclick="createSchedule()" aria-label="T·∫°o l·ªãch tr√¨nh m·ªõi">
                <span class="icon" aria-hidden="true">üìÖ</span>
                <span class="button-text">L·∫≠p Th·ªùi Kh√≥a Bi·ªÉu</span>
            </button>
            <button data-function="timer" onclick="showTimerModal()" aria-label="Thi·∫øt l·∫≠p h·∫πn gi·ªù">
                <span class="icon" aria-hidden="true">‚è±Ô∏è</span>
                <span class="button-text">H·∫πn Gi·ªù / ƒê·∫øm Ng∆∞·ª£c</span>
            </button>
            <button data-function="news" onclick="showNews()" aria-label="Xem tin t·ª©c m·ªõi nh·∫•t">
                <span class="icon" aria-hidden="true">üì∞</span>
                <span class="button-text">Tin T·ª©c</span>
            </button>
            <button data-function="newchat" onclick="newChat()" aria-label="B·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán m·ªõi">
                <span class="icon" aria-hidden="true">üí¨</span>
                <span class="button-text">ƒêo·∫°n Chat M·ªõi</span>
            </button>
        </nav>
        
        <!-- Authentication buttons -->
        <div class="sidebar-auth-buttons">
            <div class="guest-buttons" id="guestButtons">
                <button class="login-button" onclick="showLoginModal()" aria-label="ƒêƒÉng nh·∫≠p v√†o t√†i kho·∫£n">
                    <span class="icon" aria-hidden="true">üîë</span>
                    <span class="button-text">ƒêƒÉng Nh·∫≠p</span>
                </button>
                <button class="register-button" onclick="showRegisterModal()" aria-label="ƒêƒÉng k√Ω t√†i kho·∫£n m·ªõi">
                    <span class="icon" aria-hidden="true">üìù</span>
                    <span class="button-text">ƒêƒÉng K√Ω</span>
                </button>
            </div>
            <div class="user-buttons" id="userButtons">
                <button class="account-button" onclick="showAccountModal()" aria-label="Qu·∫£n l√Ω t√†i kho·∫£n">
                    <span class="icon" aria-hidden="true">üë§</span>
                    <span class="button-text">T√†i Kho·∫£n</span>
                </button>
                <button class="logout-button" onclick="handleLogout()" aria-label="ƒêƒÉng xu·∫•t">
                    <span class="icon" aria-hidden="true">üö™</span>
                    <span class="button-text">ƒêƒÉng Xu·∫•t</span>
                </button>
            </div>
        </div>
        <!-- Timer notifications container -->
        <div class="timer-notifications-sidebar" id="timer-notifications-sidebar"></div>
    </aside>
    
    <!-- Sidebar toggle button -->
    <button class="toggle-sidebar" id="toggle-sidebar" aria-label="Thu g·ªçn/M·ªü r·ªông thanh b√™n">
        <span class="arrow" aria-hidden="true">‚óÄ</span>
    </button>
    
    <!-- Main content area -->
    <main class="main-content" id="main-content">
        <h1>Tr·ª£ L√Ω AI</h1>
        
        <!-- Chat message display area -->
        <div class="chat-container" id="chat-container" role="log" aria-label="L·ªãch s·ª≠ tr√≤ chuy·ªán"></div>
        
        <!-- User input area -->
        <div id="input-container">
            <input 
                type="text" 
                id="user-input" 
                placeholder="Nh·∫≠p c√¢u h·ªèi ho·∫∑c y√™u c·∫ßu c·ªßa b·∫°n..."
                aria-label="Nh·∫≠p tin nh·∫Øn"
                autocomplete="off">
            <button id="send-button" onclick="sendMessage()" aria-label="G·ª≠i tin nh·∫Øn">
                G·ª≠i
            </button>
        </div>
    </main>
    
    <!-- Core scripts -->
    <script type="module">
        // Import c√°c h√†m t·ª´ auth.js
        import { 
            showLoginModal, 
            showRegisterModal, 
            showAccountModal, 
            handleLogout,
            checkAuthState
        } from './js/auth.js';
        
        // G√°n c√°c h√†m v√†o window ƒë·ªÉ c√≥ th·ªÉ g·ªçi t·ª´ onclick
        window.showLoginModal = showLoginModal;
        window.showRegisterModal = showRegisterModal;
        window.showAccountModal = showAccountModal;
        window.handleLogout = handleLogout;
        
        // Import v√† g√°n c√°c h√†m kh√°c
        import { showTimerModal } from './js/timer.js';
        import { showNews } from './js/news.js';
        import { createSchedule } from './js/schedule.js';
        import { newChat } from './js/chat.js';
        import { showModelSettings } from './js/model-settings.js';
        
        window.showTimerModal = showTimerModal;
        window.showNews = showNews;
        window.createSchedule = createSchedule;
        window.newChat = newChat;
        window.showModelSettings = showModelSettings;
        
        // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p khi trang ƒë∆∞·ª£c t·∫£i
        checkAuthState();
    </script>

    <!-- Th√™m config.js tr∆∞·ªõc c√°c module kh√°c -->
    <script type="module" src="js/config.js"></script>

    <!-- C√°c module kh√°c -->
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/api.js"></script>
    <script type="module" src="js/sidebar.js"></script>
    <script type="module" src="js/chat.js"></script>
    <script type="module" src="js/timer.js"></script>
    <script type="module" src="js/schedule.js"></script>
    <script type="module" src="js/news.js"></script>
    <script type="module" src="js/model-settings.js"></script>
</body>
</html>
